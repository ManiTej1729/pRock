<!DOCTYPE html>
<html lang="en">
<head>
    <title>Photo-Slideshow App</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to right, #2980b9, #6dd5fa, #ffffff);
            color: #fff;
            margin: 0;
            padding: 0;
            background-attachment: fixed;
        }

        #drop-area {
            border: 2px solid #000;
            border-radius: 20px;
            width: 80%;
            margin: 10vh auto;
            padding: 20px;
            text-align: center;
            border: 2px double solid blanchedalmond;
        }

        .my-form p {
            margin: 10px 0;
        }

        .button {
            display: inline-block;
            padding: 10px;
            background: #ccc;
            cursor: pointer;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .button:hover {
            background: #ddd;
        }

        #gallery {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        #gallery img {
            max-width: 100px;
            max-height: 100px;
            margin: 5px;
            border-radius: 5px;
        }

        #file-list {
            list-style-position: inside;
            padding-left: 0;
            text-align: center;
            margin: 0 auto;
            width: 80%;
        }
    </style>
</head>
<body>
    <div id="drop-area">
        <form class="my-form" action="/video" method="post" enctype="multipart/form-data">
            <p>Upload multiple files with the file dialog or by dragging and dropping images onto the solid boundary</p>
            <input type="file" id="fileElem" multiple accept="image/*" onchange="handleFiles(this.files)" name="image">
            <input type="submit">
        </form>
        <h3>Uploaded Files</h3>
        <ul id="file-list"></ul>
        <div id="gallery"></div>
    </div>
    <div align="center">
        <h3>Select Photos for Video</h3>
        <div id="photo-selection"></div>
        <h3>Add Background Music</h3>
        <input type="radio" id="musicFile1" onchange="handleMusic(this.value)" name="bgm" value="Chaleya">
        <label for="musicFile1">Chaleya</label><br>
        <input type="radio" id="musicFile2" onchange="handleMusic(this.value)" name="bgm" value="Heeriye">
        <label for="musicFile2">Heeriye</label><br>
        <input type="radio" id="musicFile3" onchange="handleMusic(this.value)" name="bgm" value="Happy Birthday To You Ji">
        <label for="musicFile3">Happy Birthday To You Ji</label><br>
        <input type="radio" id="musicFile4" onchange="handleMusic(this.value)" name="bgm" value="INDUSTRY-BABY">
        <label for="musicFile4">INDUSTRY-BABY</label><br>
        <br><br>
    </div>
    <div align="center">
        <button id="confirm-selection-button" onclick="handleConfirmSelection()">Confirm Selection</button><br><br>
        <button id="preview-button" style="display: none;" onclick="handlePreview()">Preview</button>
    </div>
    <script>
document.addEventListener('DOMContentLoaded', function() {

    let dropArea = document.getElementById('drop-area');
    let confirmButton = document.getElementById('confirm-selection-button');
    confirmButton.addEventListener('click', function() {
        handleConfirmSelection();
    });

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });

    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });

    dropArea.addEventListener('drop', handleDrop, false);

});


function preventDefaults(e) {
    e.preventDefault();
    e.stopPropagation();
}

function highlight(e) {
    dropArea.classList.add('highlight');
}

function unhighlight(e) {
    dropArea.classList.remove('highlight');
}

function handleDrop(e) {
    let dt = e.dataTransfer;
    let files = dt.files;
    handleFiles(files);
}

function handleFiles(files) {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = ''; // Clear previous images

    Array.from(files).forEach(file => {
        previewFile(file);
        displayFileName(file);
        addCheckbox(file);
        uploadFile(file);
    });
}

function previewFile(file) {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onloadend = function() {
        const img = document.createElement('img');
        img.src = reader.result;
        img.className = 'preview-image'; // Add a class for styling
        gallery.appendChild(img);
    };
}

function displayFileName(file) {
    const fileList = document.getElementById('file-list');
    const listItem = document.createElement('li');
    listItem.textContent = file.name;
    fileList.appendChild(listItem);
}

function uploadFile(file) {
    // Implement file upload logic here
}

function handleMusic(value) {
    console.log('Selected music file:', value);
}

function addCheckbox(file) {
    const photoSelectionDiv = document.getElementById('photo-selection');

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.value = file.name;
    checkbox.id = `checkbox-${file.name}`;

    const label = document.createElement('label');
    label.htmlFor = `checkbox-${file.name}`;
    label.textContent = file.name;

    const br = document.createElement('br');

    photoSelectionDiv.appendChild(checkbox);
    photoSelectionDiv.appendChild(label);
    photoSelectionDiv.appendChild(br);
}

function handleConfirmSelection() {
    const previewButton = document.getElementById('preview-button');
    previewButton.style.display = 'block';
}

function handlePreview() {
    window.location.href = 'http://127.0.0.1:5500/Project_pRock/templates/video.html';
}
    </script>
</body>
</html>
